{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios'; // Імпортуємо Axios\n\n// функція для виконання запиту до API Pixabay з використанням Axios\nexport async function fetchImages(searchQuery, page = 1, perPage = 15) {\n  const apiKey = '43059810-21766dfeafea29ca9c24ae0e2';\n  const url = `https://pixabay.com/api/?key=${apiKey}&q=${searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  try {\n    const response = await axios.get(url);\n    return response.data.hits;\n  } catch (error) {\n    console.error('Error fetching data:', error);\n    return [];\n  }\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n// Ініціалізація SimpleLightbox\nconst lightbox = new SimpleLightbox('#gallery a', {});\n\n// Функція для додавання нових зображень під попередніми\nexport function renderImages(images, totalHits) {\n  const gallery = document.getElementById('gallery');\n\n  images.forEach(image => {\n    const cardHTML = `\n      <div class=\"card\">\n        <a href=\"${image.largeImageURL}\" data-lightbox=\"image\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n        </a>\n        <div class=\"info\">\n          <p><strong>Likes</strong> <br>${image.likes}</p>\n          <p><strong>Views</strong> <br>${image.views}</p>\n          <p><strong>Comments</strong> <br>${image.comments}</p>\n          <p><strong>Downloads</strong> <br>${image.downloads}</p>\n        </div>\n      </div>\n    `;\n\n    // Додаємо нову картку зображення під попередніми\n    gallery.insertAdjacentHTML('beforeend', cardHTML);\n  });\n\n  // Перевірка, чи дійшли до кінця результатів пошуку\n  if (gallery.children.length >= totalHits) {\n    hideLoadMoreButton();\n    showEndMessage();\n  } else {\n    // Викликаємо метод refresh для оновлення SimpleLightbox\n    lightbox.refresh();\n  }\n}\n\n// Функція для плавного прокручування сторінки до нижнього краю останнього завантаженого зображення\nexport function smoothScrollByCardHeight() {\n  const gallery = document.getElementById('gallery');\n  const lastImage = gallery.lastElementChild;\n  const lastImageHeight = lastImage.offsetHeight;\n  const lastImageOffset = lastImage.offsetTop;\n\n  window.scrollTo({\n    top: lastImageOffset + lastImageHeight,\n    behavior: 'smooth'\n  });\n}\n\n// Функція для приховання кнопки \"Load more\"\nexport function hideLoadMoreButton() {\n  const loadMoreBtn = document.getElementById('load-more-btn');\n  loadMoreBtn.style.display = 'none';\n}\n\n// Функція для відображення повідомлення про кінець результатів пошуку\nexport function showEndMessage() {\n  const endMessage = document.getElementById('end-message');\n  endMessage.style.display = 'block';\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, hideLoadMoreButton, showEndMessage } from './js/render-functions.js';\n\nconst searchForm = document.getElementById('search-form');\nconst loader = document.getElementById('loader');\nconst loadMoreBtn = document.getElementById('load-more-btn');\nconst endMessage = document.getElementById('end-message');\nlet currentSearchQuery = '';\nlet currentPage = 1;\n\n// Функція для приховування повідомлення про кінець результатів\nexport function hideEndMessage() {\n  const endMessage = document.getElementById('end-message');\n  endMessage.style.display = 'none';\n}\n\n\n// Використовуємо searchForm у слухачі подій\nsearchForm.addEventListener('submit', async (event) => {\n  event.preventDefault();\n\n  const searchInput = document.getElementById('search-input');\n  const searchQuery = searchInput.value.trim();\n\n  if (!searchQuery) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search query!',\n    });\n    return;\n  }\n\n  currentSearchQuery = searchQuery;\n  currentPage = 1;\n\n  loader.classList.remove('hidden');\n  const gallery = document.getElementById('gallery');\n  gallery.innerHTML = '';\n\n  // Викликаємо функцію для приховування повідомлення про кінець результатів перед новим запитом\nhideEndMessage();\n\n  try {\n    const images = await fetchImages(searchQuery);\n    const totalHits = images.totalHits;\n    renderImages(images, totalHits);\n  \n    // Перевіряємо, чи отримано зображення після сабміту\n    if (images.length === 0) {\n      hideLoadMoreButton(); // Приховуємо кнопку, якщо не отримано жодного зображення\n      showEndMessage();\n    } else {\n      // Перевіряємо, чи вже відображено всі доступні зображення\n// Перевірка кількості отриманих зображень і відображення кнопки \"Load more\" або повідомлення про кінець результатів\nif (images.length < 15) {\n  hideLoadMoreButton(); // Приховуємо кнопку, якщо кількість отриманих зображень менша за 15\n  showEndMessage(); // Відображаємо повідомлення про кінець результатів\n} else {\n  loadMoreBtn.style.display = 'block'; // Відображаємо кнопку \"Load more\", якщо кількість отриманих зображень більша або дорівнює 15\n}\n\n    }\n  } catch (error) {\n    console.error('Error searching for images:', error);\n    hideLoadMoreButton(); // Приховуємо кнопку у випадку невалідного запиту\n  } finally {\n    loader.classList.add('hidden');\n  }\n});\n\n// При натисканні на кнопку \"Load more\" виконуємо плавне прокручування сторінки\nloadMoreBtn.addEventListener('click', async () => {\n  loader.classList.remove('hidden');\n\n  try {\n    const images = await fetchImages(currentSearchQuery, currentPage + 1);\n    renderImages(images);\n    currentPage++; // Оновлюємо значення поточної сторінки після завантаження наступної\n\n    // Отримуємо висоту однієї карточки галереї\n    const cardHeight = document.querySelector('.card').getBoundingClientRect().height;\n\n    // Прокручуємо сторінку на дві висоти карточки галереї з плавним ефектом\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth'\n    });\n\n// Перевірка кількості отриманих зображень і відображення кнопки \"Load more\" або повідомлення про кінець результатів\nif (images.length < 15) {\n  hideLoadMoreButton(); // Приховуємо кнопку, якщо кількість отриманих зображень менша за 15\n  showEndMessage(); // Відображаємо повідомлення про кінець результатів\n} else {\n  loadMoreBtn.style.display = 'block'; // Відображаємо кнопку \"Load more\", якщо кількість отриманих зображень більша або дорівнює 15\n}\n\n  } catch (error) {\n    console.error('Error searching for images:', error);\n  } finally {\n    loader.classList.add('hidden');\n  }\n});\n\n\n"],"names":["fetchImages","searchQuery","page","perPage","url","axios","error","lightbox","SimpleLightbox","renderImages","images","totalHits","gallery","image","cardHTML","hideLoadMoreButton","showEndMessage","loadMoreBtn","endMessage","searchForm","loader","currentSearchQuery","currentPage","hideEndMessage","event","cardHeight"],"mappings":"6vBAGO,eAAeA,EAAYC,EAAaC,EAAO,EAAGC,EAAU,GAAI,CAErE,MAAMC,EAAM,qEAA4CH,CAAW,iEAAiEC,CAAI,aAAaC,CAAO,GAE5J,GAAI,CAEF,OADiB,MAAME,EAAM,IAAID,CAAG,GACpB,KAAK,IACtB,OAAQE,EAAO,CACd,eAAQ,MAAM,uBAAwBA,CAAK,EACpC,EACR,CACH,CCRA,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAAE,CAAA,EAG7C,SAASC,EAAaC,EAAQC,EAAW,CAC9C,MAAMC,EAAU,SAAS,eAAe,SAAS,EAEjDF,EAAO,QAAQG,GAAS,CACtB,MAAMC,EAAW;AAAA;AAAA,mBAEFD,EAAM,aAAa;AAAA,sBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,0CAGlBA,EAAM,KAAK;AAAA,0CACXA,EAAM,KAAK;AAAA,6CACRA,EAAM,QAAQ;AAAA,8CACbA,EAAM,SAAS;AAAA;AAAA;AAAA,MAMzDD,EAAQ,mBAAmB,YAAaE,CAAQ,CACpD,CAAG,EAGGF,EAAQ,SAAS,QAAUD,GAC7BI,IACAC,KAGAT,EAAS,QAAO,CAEpB,CAgBO,SAASQ,GAAqB,CACnC,MAAME,EAAc,SAAS,eAAe,eAAe,EAC3DA,EAAY,MAAM,QAAU,MAC9B,CAGO,SAASD,GAAiB,CAC/B,MAAME,EAAa,SAAS,eAAe,aAAa,EACxDA,EAAW,MAAM,QAAU,OAC7B,CC7DA,MAAMC,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAS,SAAS,eAAe,QAAQ,EACzCH,EAAc,SAAS,eAAe,eAAe,EACxC,SAAS,eAAe,aAAa,EACxD,IAAII,EAAqB,GACrBC,EAAc,EAGX,SAASC,GAAiB,CAC/B,MAAML,EAAa,SAAS,eAAe,aAAa,EACxDA,EAAW,MAAM,QAAU,MAC7B,CAIAC,EAAW,iBAAiB,SAAU,MAAOK,GAAU,CACrDA,EAAM,eAAc,EAGpB,MAAMvB,EADc,SAAS,eAAe,cAAc,EAC1B,MAAM,KAAI,EAE1C,GAAI,CAACA,EAAa,CAChB,SAAS,MAAM,CACb,MAAO,QACP,QAAS,8BACf,CAAK,EACD,MACD,CAEDoB,EAAqBpB,EACrBqB,EAAc,EAEdF,EAAO,UAAU,OAAO,QAAQ,EAChC,MAAMR,EAAU,SAAS,eAAe,SAAS,EACjDA,EAAQ,UAAY,GAGtBW,IAEE,GAAI,CACF,MAAMb,EAAS,MAAMV,EAAYC,CAAW,EACtCU,EAAYD,EAAO,UACzBD,EAAaC,EAAQC,CAAS,EAG1BD,EAAO,SAAW,GAMtBA,EAAO,OAAS,IALdK,IACAC,KAQJC,EAAY,MAAM,QAAU,OAI3B,OAAQX,EAAO,CACd,QAAQ,MAAM,8BAA+BA,CAAK,EAClDS,GACJ,QAAY,CACRK,EAAO,UAAU,IAAI,QAAQ,CAC9B,CACH,CAAC,EAGDH,EAAY,iBAAiB,QAAS,SAAY,CAChDG,EAAO,UAAU,OAAO,QAAQ,EAEhC,GAAI,CACF,MAAMV,EAAS,MAAMV,EAAYqB,EAAoBC,EAAc,CAAC,EACpEb,EAAaC,CAAM,EACnBY,IAGA,MAAMG,EAAa,SAAS,cAAc,OAAO,EAAE,sBAAuB,EAAC,OAG3E,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAChB,CAAK,EAGDf,EAAO,OAAS,IAClBK,IACAC,KAEAC,EAAY,MAAM,QAAU,OAG3B,OAAQX,EAAO,CACd,QAAQ,MAAM,8BAA+BA,CAAK,CACtD,QAAY,CACRc,EAAO,UAAU,IAAI,QAAQ,CAC9B,CACH,CAAC"}