{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios'; // Імпортуємо Axios\n\n// функція для виконання запиту до API Pixabay з використанням Axios\nexport async function fetchImages(searchQuery, page = 1, perPage = 15) {\n  const apiKey = '43059810-21766dfeafea29ca9c24ae0e2';\n  const url = `https://pixabay.com/api/?key=${apiKey}&q=${searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  try {\n    const response = await axios.get(url);\n    return response.data.hits;\n  } catch (error) {\n    console.error('Error fetching data:', error);\n    return [];\n  }\n}\n","// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n// Функція для додавання нових зображень під попередніми\nexport function renderImages(images, totalHits) {\n  const gallery = document.getElementById('gallery');\n\n  images.forEach(image => {\n    const cardHTML = `\n      <div class=\"card\">\n        <a href=\"${image.largeImageURL}\" data-lightbox=\"image\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n        </a>\n        <div class=\"info\">\n          <p><strong>Likes</strong> <br>${image.likes}</p>\n          <p><strong>Views</strong> <br>${image.views}</p>\n          <p><strong>Comments</strong> <br>${image.comments}</p>\n          <p><strong>Downloads</strong> <br>${image.downloads}</p>\n        </div>\n      </div>\n    `;\n\n    // Додаємо нову картку зображення під попередніми\n    gallery.insertAdjacentHTML('beforeend', cardHTML);\n  });\n\n  // Після додавання нових елементів до галереї, викликаємо метод refresh\n  const lightbox = new SimpleLightbox('#gallery a', {});\n  lightbox.refresh();\n\n  \n  // Перевірка, чи дійшли до кінця результатів пошуку\n  if (gallery.children.length >= totalHits) {\n    hideLoadMoreButton();\n    showEndMessage();\n  }\n}\n\n// Функція для приховання кнопки \"Load more\"\nfunction hideLoadMoreButton() {\n  const loadMoreBtn = document.getElementById('load-more-btn');\n  loadMoreBtn.style.display = 'none';\n}\n  \n// Функція для відображення повідомлення про кінець результатів пошуку\nfunction showEndMessage() {\n  const endMessage = document.getElementById('end-message');\n  endMessage.style.display = 'block';\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages } from './js/render-functions.js'; // Ось тут ми імпортуємо функцію renderImages, а також hideLoadMoreButton та showEndMessage\n\nconst searchForm = document.getElementById('search-form');\nconst loader = document.getElementById('loader'); // Отримання елемента спінера\nconst loadMoreBtn = document.getElementById('load-more-btn');\nconst endMessage = document.getElementById('end-message'); // Отримання елемента повідомлення про кінець результатів пошуку\nlet currentSearchQuery = ''; // Зберігаємо поточний пошуковий запит\nlet currentPage = 1; // Ініціалізуємо currentPage\n\nsearchForm.addEventListener('submit', async (event) => {\n  event.preventDefault();\n\n  const searchInput = document.getElementById('search-input');\n  const searchQuery = searchInput.value.trim();\n\n  if (!searchQuery) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search query!',\n    });\n    return;\n  }\n\n  currentSearchQuery = searchQuery; // Оновлюємо поточний пошуковий запит\n  currentPage = 1; // Повертаємо поточну сторінку до початкового значення\n\n  loader.classList.remove('hidden');\n\n  try {\n    const images = await fetchImages(searchQuery);\n    const totalHits = images.totalHits; // Отримання загальної кількості зображень\n    renderImages(images, totalHits);\n  \n    // Показуємо кнопку \"Load more\" після завантаження зображень\n    loadMoreBtn.style.display = 'block';\n  } catch (error) {\n    console.error('Error searching for images:', error);\n  } finally {\n    loader.classList.add('hidden');\n  }\n});\n\n// Функція для визначення висоти однієї карточки галереї\nfunction getCardHeight() {\n  const card = document.querySelector('.card');\n  if (card) {\n    const cardRect = card.getBoundingClientRect();\n    return cardRect.height;\n  }\n  return 0; // Повертаємо 0 у випадку, якщо карточка не знайдена\n}\n\n// Функція для плавного прокручування сторінки\nfunction smoothScrollByCardHeight() {\n  const cardHeight = getCardHeight();\n  if (cardHeight !== 0) {\n    window.scrollBy({\n      top: cardHeight * 2, // Прокручуємо сторінку на дві висоти карточки\n      behavior: 'smooth' // Встановлюємо плавність прокрутки\n    });\n  }\n}\n\n// При натисканні на кнопку \"Load more\" виконуємо плавну прокрутку сторінки\nloadMoreBtn.addEventListener('click', async () => {\n  loader.classList.remove('hidden');\n\n  try {\n    const images = await fetchImages(currentSearchQuery, currentPage + 1);\n    renderImages(images);\n    currentPage++; // Оновлюємо значення поточної сторінки після завантаження наступної\n\n     // Перевіряємо, чи дійшли до кінця результатів пошуку\n     if (images.length === 0) {\n      hideLoadMoreButton();\n      showEndMessage();\n    }\n    \n    // Викликаємо функцію для плавного прокручування сторінки\n    smoothScrollByCardHeight();\n  } catch (error) {\n    console.error('Error loading more images:', error);\n  } finally {\n    loader.classList.add('hidden');\n  }\n});\n\n// Функція для приховання кнопки \"Load more\"\nfunction hideLoadMoreButton() {\n  loadMoreBtn.style.display = 'none';\n}\n\n// Функція для відображення повідомлення про кінець результатів пошуку\nfunction showEndMessage() {\n  endMessage.style.display = 'block';\n}\n"],"names":["fetchImages","searchQuery","page","perPage","url","axios","error","renderImages","images","totalHits","gallery","image","cardHTML","SimpleLightbox","hideLoadMoreButton","showEndMessage","loadMoreBtn","endMessage","searchForm","loader","currentSearchQuery","currentPage","event","getCardHeight","card","smoothScrollByCardHeight","cardHeight"],"mappings":"6vBAGO,eAAeA,EAAYC,EAAaC,EAAO,EAAGC,EAAU,GAAI,CAErE,MAAMC,EAAM,qEAA4CH,CAAW,iEAAiEC,CAAI,aAAaC,CAAO,GAE5J,GAAI,CAEF,OADiB,MAAME,EAAM,IAAID,CAAG,GACpB,KAAK,IACtB,OAAQE,EAAO,CACd,eAAQ,MAAM,uBAAwBA,CAAK,EACpC,EACR,CACH,CCHO,SAASC,EAAaC,EAAQC,EAAW,CAC9C,MAAMC,EAAU,SAAS,eAAe,SAAS,EAEjDF,EAAO,QAAQG,GAAS,CACtB,MAAMC,EAAW;AAAA;AAAA,mBAEFD,EAAM,aAAa;AAAA,sBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,0CAGlBA,EAAM,KAAK;AAAA,0CACXA,EAAM,KAAK;AAAA,6CACRA,EAAM,QAAQ;AAAA,8CACbA,EAAM,SAAS;AAAA;AAAA;AAAA,MAMzDD,EAAQ,mBAAmB,YAAaE,CAAQ,CACpD,CAAG,EAGgB,IAAIC,EAAe,aAAc,CAAE,CAAA,EAC3C,QAAO,EAIZH,EAAQ,SAAS,QAAUD,IAC7BK,IACAC,IAEJ,CAGA,SAASD,GAAqB,CAC5B,MAAME,EAAc,SAAS,eAAe,eAAe,EAC3DA,EAAY,MAAM,QAAU,MAC9B,CAGA,SAASD,GAAiB,CACxB,MAAME,EAAa,SAAS,eAAe,aAAa,EACxDA,EAAW,MAAM,QAAU,OAC7B,CCpDA,MAAMC,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAS,SAAS,eAAe,QAAQ,EACzCH,EAAc,SAAS,eAAe,eAAe,EACrDC,EAAa,SAAS,eAAe,aAAa,EACxD,IAAIG,EAAqB,GACrBC,EAAc,EAElBH,EAAW,iBAAiB,SAAU,MAAOI,GAAU,CACrDA,EAAM,eAAc,EAGpB,MAAMrB,EADc,SAAS,eAAe,cAAc,EAC1B,MAAM,KAAI,EAE1C,GAAI,CAACA,EAAa,CAChB,SAAS,MAAM,CACb,MAAO,QACP,QAAS,8BACf,CAAK,EACD,MACD,CAEDmB,EAAqBnB,EACrBoB,EAAc,EAEdF,EAAO,UAAU,OAAO,QAAQ,EAEhC,GAAI,CACF,MAAMX,EAAS,MAAMR,EAAYC,CAAW,EACtCQ,EAAYD,EAAO,UACzBD,EAAaC,EAAQC,CAAS,EAG9BO,EAAY,MAAM,QAAU,OAC7B,OAAQV,EAAO,CACd,QAAQ,MAAM,8BAA+BA,CAAK,CACtD,QAAY,CACRa,EAAO,UAAU,IAAI,QAAQ,CAC9B,CACH,CAAC,EAGD,SAASI,GAAgB,CACvB,MAAMC,EAAO,SAAS,cAAc,OAAO,EAC3C,OAAIA,EACeA,EAAK,wBACN,OAEX,CACT,CAGA,SAASC,GAA2B,CAClC,MAAMC,EAAaH,IACfG,IAAe,GACjB,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAChB,CAAK,CAEL,CAGAV,EAAY,iBAAiB,QAAS,SAAY,CAChDG,EAAO,UAAU,OAAO,QAAQ,EAEhC,GAAI,CACF,MAAMX,EAAS,MAAMR,EAAYoB,EAAoBC,EAAc,CAAC,EACpEd,EAAaC,CAAM,EACnBa,IAGKb,EAAO,SAAW,IACrBM,IACAC,KAIFU,GACD,OAAQnB,EAAO,CACd,QAAQ,MAAM,6BAA8BA,CAAK,CACrD,QAAY,CACRa,EAAO,UAAU,IAAI,QAAQ,CAC9B,CACH,CAAC,EAGD,SAASL,GAAqB,CAC5BE,EAAY,MAAM,QAAU,MAC9B,CAGA,SAASD,GAAiB,CACxBE,EAAW,MAAM,QAAU,OAC7B"}